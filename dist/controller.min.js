/**
  * v1.0.0 generated on: Sat Apr 30 2016 16:02:56 GMT-0500 (CDT)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved. See LICENSE (BSD).
  */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();if(NGN){window.NGNX=window.NGNX||{};var _Controller=function(){function e(t){_classCallCheck(this,e),t=t||{},Object.defineProperties(this,{scope:NGN.define(!0,!1,!1,t.scope||null),references:NGN.define(!1,!1,!1,t.references||{}),datastores:NGN.define(!0,!1,!1,t.stores||{}),events:NGN.define(!1,!0,!1,[]),dataevents:NGN.define(!1,!1,!1,["record.create","record.delete","index.create","index.delete","record.duplicate","record.update"])});var n=this;Object.keys(this.references).forEach(function(e){NGN.ref.hasOwnProperty(e)||NGN.ref.create(e,n[e])}),null!==this.scope&&Object.keys(this.datastores).forEach(function(e){n.scopeStoreEvents(e)})}return _createClass(e,[{key:"addStore",value:function(e,t){var n=this;this.datastores.hasOwnProperty(e)&&(null!==this.scope&&this.dataevents.forEach(function(e){NGN.BUS.off(n.scope+e)}),console.warn("Controller already had a reference to "+e+", which has been overwritten.")),this.datastores[e]=t,this.scopeStoreEvents(e)}},{key:"scopeStoreEvents",value:function(e,t){var n=this;t=NGN.coalesce(t,!1),null!==this.scope?!function(){var t=n;n.dataevents.forEach(function(n){t.datastores[e].on(n,function(e){NGN.BUS.emit(t.scope+n,e)})})}():t||console.warn("Controller.scopeStoreEvents called without a defined scope.")}},{key:"on",value:function(e,t){return NGN.BUS?void(this.events.indexOf(e)>=0?NGN.BUS.on(e,t):console.warn(e+" is not a supported event for this Controller.")):void console.warn("NGNX.Controller.on('"+e+"', ...) will not work because NGN.BUS is not available.")}},{key:"store",get:function(){return this.datastores}},{key:"ref",get:function(){return NGN.ref}},{key:"dom",get:function(){return this.ref}}]),e}();NGNX.Controller=_Controller}else console.error("NGN not found.");